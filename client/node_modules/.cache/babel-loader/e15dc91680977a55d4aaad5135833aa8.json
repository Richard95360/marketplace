{"ast":null,"code":"var _jsxFileName = \"/media/haddad/6a8a543b-c57b-47b0-a06e-396959f42841/sandra-udemy/marketplace/client/src/lib/hooks/useFormValidation/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useMemo } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FormContext = /*#__PURE__*/React.createContext();\nlet context;\nexport const useFormValidation = ({\n  formName,\n  defaultValues = {}\n}) => {\n  _s();\n\n  const [formValues, setFormValues] = React.useState({});\n  const [errors, setErrors] = React.useState({});\n  const [isDirty, setDirty] = React.useState(false);\n\n  const handleOnChange = (event, value) => {\n    var _value$toLowerCase;\n\n    setDirty(true);\n    const val = (_value$toLowerCase = value === null || value === void 0 ? void 0 : value.toLowerCase()) !== null && _value$toLowerCase !== void 0 ? _value$toLowerCase : event.target.value;\n    setFormValues(prevState => ({ ...prevState,\n      [formName]: { ...prevState[formName],\n        [event.target.name]: val\n      }\n    }));\n  };\n\n  const isValid = React.useMemo(() => {\n    var _errors$formName;\n\n    return Object.values((_errors$formName = errors[formName]) !== null && _errors$formName !== void 0 ? _errors$formName : {}).some(error => error);\n  }, [formValues, handleOnChange]);\n  React.useEffect(() => register(), []);\n\n  const register = values => {\n    const val = values !== null && values !== void 0 ? values : defaultValues;\n    Object.entries(val).forEach(([key, value]) => {\n      setFormValues(prevState => ({ ...defaultValues,\n        [formName]: { ...prevState[formName],\n          [key]: value\n        }\n      }));\n    });\n  };\n\n  const validate = async (values) => Object.entries(values).forEach(([key, value]) => setErrors(prevState => ({ ...prevState,\n    [formName]: { ...prevState[formName],\n      [key]: !(value === null || value === void 0 ? void 0 : value.length)\n    }\n  })));\n\n  context = React.useMemo(() => {\n    return {\n      errors,\n      register,\n      validate,\n      handleOnChange,\n      formValues,\n      isValid: Boolean(!isValid && isDirty)\n    };\n  }, [formValues]);\n  return context;\n};\n\n_s(useFormValidation, \"8vD2abAyukZenqVrQKBB6qzCwwA=\");\n\nconst FormProvider = ({\n  children\n}) => /*#__PURE__*/_jsxDEV(FormContext.Provider, {\n  value: context,\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 46,\n  columnNumber: 40\n}, this);\n\n_c = FormProvider;\nexport default FormProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormProvider\");","map":{"version":3,"sources":["/media/haddad/6a8a543b-c57b-47b0-a06e-396959f42841/sandra-udemy/marketplace/client/src/lib/hooks/useFormValidation/index.js"],"names":["React","useMemo","FormContext","createContext","context","useFormValidation","formName","defaultValues","formValues","setFormValues","useState","errors","setErrors","isDirty","setDirty","handleOnChange","event","value","val","toLowerCase","target","prevState","name","isValid","Object","values","some","error","useEffect","register","entries","forEach","key","validate","length","Boolean","FormProvider","children"],"mappings":"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","sourcesContent":["import React , {useMemo}from 'react';\n\nconst FormContext = React.createContext()\n\nlet context;\nexport const useFormValidation = ({ formName, defaultValues = {} }) => { \n    const [formValues, setFormValues] = React.useState({})\n    const [errors, setErrors] = React.useState({})\n    const [isDirty, setDirty] = React.useState(false)\n\n    const handleOnChange = (event, value) => {\n        setDirty(true)\n        const val = value?.toLowerCase() ?? event.target.value\n        setFormValues(prevState => ({ ...prevState, [formName]: { ...prevState[formName], [event.target.name]: val }}))\n    }\n   \n    const isValid = React.useMemo(() => Object.values(errors[formName] ?? {}).some(error => error), [formValues, handleOnChange])\n    React.useEffect(() => register(), [])\n  \n    const register = (values) => {\n        const val = values ?? defaultValues\n        Object.entries(val)\n            .forEach(([key, value]) => { \n                setFormValues(prevState => ({ ...defaultValues, [formName]: { ...prevState[formName], [key]: value } }))\n            })  \n    }\n    const validate = async (values) => \n        Object.entries(values)\n            .forEach(([key, value]) =>\n                setErrors(prevState =>\n                    ({ ...prevState, [formName]: { ...prevState[formName], [key]: !value?.length } })))     \n                \n    context = React.useMemo(() => { \n        return {    \n            errors, \n            register,\n            validate,\n            handleOnChange, \n            formValues, \n            isValid : Boolean(!isValid && isDirty)\n        }\n    }, [formValues])\n    return context\n}\n\nconst FormProvider = ({ children }) => <FormContext.Provider value={context}>{children}</FormContext.Provider>\n\nexport default FormProvider "]},"metadata":{},"sourceType":"module"}